#include "iostream"
#include "TXLib.h"
#include "Button.h"



 int main()
 {
  txCreateWindow(800,600);
  HDC Buildings=txCreateCompatibleDC (800,600);
  //картинки начало
   HDC Menu=txLoadImage("Texture/Menu.bmp");
   HDC InformationMenu=txLoadImage("Texture/Information.bmp");
   HDC Field=txLoadImage("Texture/Field.bmp");
   HDC Nya=txLoadImage("Texture/Nya.bmp");
   HDC Sun=txLoadImage("Texture/Sun.bmp");
   HDC Building1=txLoadImage("Texture/Doma1.bmp");
  //картинки конец

  //кнопки (создание) начало

   //спрайт 1 начало
    Button NewGame(30,30,130,70,TX_BLUE);
    NewGame.textAdd("New Game");

    Button Saves(30,110,130,70,TX_BLUE);
    Saves.textAdd("Save Games");

    Button Information(30,190,130,70,TX_BLUE);
    Information.textAdd("I");

    Button Settings(30,270,130,70,TX_BLUE);
    Settings.textAdd("Settings");

    Button LeaveS1(30,520,130,70,TX_RED);
    LeaveS1.textAdd("Leave");
   //спрайт 1 конец

   //спрайт 2 начало
    Button Continue(260,360,280,70,TX_BLUE);
    Continue.textAdd("Continue");

    Button LeaveAndSave(260,440,280,70,TX_BLUE);
    LeaveAndSave.textAdd("Leave And Save");

    Button LeaveS2(260,520,280,70,TX_RED);
    LeaveS2.textAdd("Leave to Main Menu");
   //спрайт 2 конец

  //кнопки (создание) конец

  //создание переменных начало

   int sprite=1;//спрайта нет в России (это китайский)
   int Win2_Visible=0;//течение времени (0-время идет)

  //создание переменных конец

  while(1)
  {
   txClear();
   txBegin();

   if (sprite==1)
    {//гл меню
     txSetColor(TX_WHITE);
     txSelectFont("Arial",40,10);

     txBitBlt(txDC(),0,0,800,600,Menu);

   //кнопки (текст/рисовка) начало

     NewGame.Draw();
     if (NewGame.BClick(txMouseX(),txMouseY())&&txMouseButtons()==1) sprite=2;

     Saves.Draw();
     if (Saves.BClick(txMouseX(),txMouseY())&&txMouseButtons()==1) sprite=3;

     Information.Draw();
     if (Information.BClick(txMouseX(),txMouseY())&&txMouseButtons()==1) sprite=4;

     Settings.Draw();
     if (Settings.BClick(txMouseX(),txMouseY())&&txMouseButtons()==1) sprite=5;

     LeaveS1.Draw();
     if (LeaveS1.BClick(txMouseX(),txMouseY())&&txMouseButtons()==1) sprite=6;

   //кнопки (текст/рисовка) конец

   //Название города начало
    txSetColor(TX_GREEN);
    txSelectFont("Arial",60,30);
    txTextOut(220,480,"Curved Skylines");
   //Название города конец

   //Версия игры начало
    txSetColor(TX_GREEN);
    txSelectFont("Arial",10,10);
    txTextOut(700,590,"v Beta 1.0");
   //Версия игры конец


  }

   if (sprite==2)
    {//игра
      txBitBlt(txDC(),0,0,800,600,Field);
      txTransparentBlt (700,0,Sun,TX_WHITE);

     if (Win2_Visible)// если время остановленно
      {
        txSetColor(TX_BLUE);
        txSelectFont("Arial",40,10);

        txDrawText (310,300,500,330,"Curved Skylines");

        txSetColor(TX_WHITE);
      //кнопки (текст/рисовка) начало
       Continue.Draw();
       if (Continue.BClick(txMouseX(),txMouseY())&&txMouseButtons()==1) Win2_Visible=0;

       LeaveAndSave.Draw();
       if (LeaveAndSave.BClick(txMouseX(),txMouseY())&&txMouseButtons()==1) txMessageBox("Sorry.Function is development.");

       LeaveS2.Draw();
       if (LeaveS2.BClick(txMouseX(),txMouseY())&&txMouseButtons()==1) sprite=1;
      //кнопки (текст/рисовка) конец

       if (GetAsyncKeyState(VK_ESCAPE)) Win2_Visible=0;
       txSleep(65);
     }

     if (!Win2_Visible)//если время не остановленно
     {
      if (txMouseButtons())
       {
       txTransparentBlt(Buildings,txMouseX(),txMouseY(),50,86,Building1,0,0,TX_WHITE);
       }






      if (GetAsyncKeyState(VK_ESCAPE)) Win2_Visible=1;
      txSleep(65);
     }
   }


  if (sprite==4)
   {//сведения
     txBitBlt(txDC(),0,0,800,600,InformationMenu);


     if (GetAsyncKeyState(VK_ESCAPE)) sprite=1;
   }

 if (sprite==6)
  {//выход
   txSetFillColor(TX_WHITE);

   txBitBlt(txDC(),0,50,800,600,Nya);

   if (GetAsyncKeyState(VK_ESCAPE)) sprite=1;



  }

  txEnd();
  }
 }//счастливый конец
